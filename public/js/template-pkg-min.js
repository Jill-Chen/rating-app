/*publish time:2011-08-01 20:02:27*/
KISSY.add("template/template",function(I){var F={},G={},B={"#":"start","/":"end"},E={},H=function(J){J in E||(E[J]=RegExp(J,"ig"));return E[J]},A=function(J){var L,K;return I.trim(J).replace(H("[\r\t\n]")," ").replace(H("([\"'])"),"\\$1").replace(H("{{([#/]?)(?!}})([^}]*)}}"),function(N,M,P){L="";if(M){P=I.trim(P);K=P.indexOf(" ");P=K===-1?[P,""]:[P.substring(0,P.indexOf(" ")),P.substring(P.indexOf(" "))];for(var O in D){if(P[0]===O){P.shift();if(M in B){N=D[O][B[M]];L=I.isFunction(N)?String(N.apply(this,I.trim(P.join("").replace(H("\\\\(['\"])"),"$1")).split(/\s+/))):String(N.replace(H("KS_TEMPL_STAT_PARAM"),P.join("").replace(H("\\\\(['\"])"),"$1")))}}}}else{L="KS_TEMPL.push("+P.replace(H("\\\\(['\"])"),"$1")+");"}return'");'+L+'KS_TEMPL.push("'})},D={"if":{start:"if(KS_TEMPL_STAT_PARAM){",end:"}"},"else":{start:"}else{"},elseif:{start:"}else if(KS_TEMPL_STAT_PARAM){"},each:{start:function(){var J=[].slice.call(arguments),L="_ks_value",K="_ks_index";if(J[1]==="as"&&J[2]){L=J[2]||L;K=J[3]||K}return"KISSY.each("+J[0]+", function("+L+", "+K+"){"},end:"});"},"!":{start:"/*KS_TEMPL_STAT_PARAM*/"}},C=function(J,N){I.mix(F,N);if(!(J in G)){var M="KS_DATA_"+I.now(),L,K=["var KS_TEMPL=[],KS_TEMPL_STAT_PARAM=false;with(",M,'||{}){try{KS_TEMPL.push("',A(J),'");}catch(e){KS_TEMPL=["KISSY.Template: Render Error. " + e.message]}};return KS_TEMPL.join("");'];try{L=new Function(M,K.join(""))}catch(O){K[3]='");KS_TEMPL.push("KISSY.Template: Syntax Error. ,'+O.message+'");KS_TEMPL.push("';L=new Function(M,K.join(""))}G[J]={name:M,parser:K.join(""),render:L}}return G[J]};I.mix(C,{log:function(J){if(!(J in G)){C(J,undefined);this.log(J)}},addStatement:function(J,K){if(I.isString(J)&&I.isObject(K)){D[J]=K}}});return C},{requires:["core"]});KISSY.add("template/template-node",function(A){A.mix(A,{tmpl:function(B,C){return A.one(A.DOM.create(A.Template(A.one(B).html()).render(C)))}})},{requires:["./template"]});KISSY.add("template",function(A,B){return A.Template=B},{requires:["template/template","template/template-node"]});